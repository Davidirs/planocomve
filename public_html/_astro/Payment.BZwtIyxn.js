import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as t}from"./index.BVOCwoKb.js";import{b as j,t as f}from"./axios.BvopIwSP.js";function S(){const[o,x]=t.useState({docType:"",docNumber:""}),[d,n]=t.useState([]),[r,l]=t.useState(""),[c,p]=t.useState(""),[b,y]=t.useState(null),[i,m]=t.useState(!1),u=s=>x({...o,[s.target.name]:s.target.value}),h=async s=>{s.preventDefault(),p(""),n([]),l(""),m(!0);try{const a=await j.post("/facilito/consultadeuda",{headers:{"Content-Type":"application/json"},token:f,cedula:o.docType+o.docNumber});console.log(a.data),a.data.code==="150"?(l(a.data.mensaje||""),n([])):(l(a.data.mensaje||""),a.data.facturas?n(a.data.facturas):n([])),console.log("Response:",a.data)}catch(a){l("Error consultando deuda"),n([]),console.error("Error:",a)}finally{m(!1)}},g=s=>{const a=new URLSearchParams({id:s.IDFactura,monto:s.valor,detalle:s.detalle});window.location.href=`/procesar-pago?${a}`};return e.jsx("main",{className:"min-h-screen flex items-center justify-center bg-black-500 p-4",children:e.jsxs("section",{className:"w-full max-w-md rounded-xl bg-white shadow-2xl shadow-black/10",children:[e.jsx("div",{className:"flex justify-center pt-10",children:e.jsx("img",{src:"/logo/Principal-Logo-Plano-Telecom.png",alt:"Plano logo",className:"h-28 w-auto"})}),e.jsxs("form",{onSubmit:h,className:"p-8 space-y-6",children:[e.jsx("h2",{className:"font-semibold text-lg text-gray-700",children:"Cédula o RIF:"}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"docType",className:"sr-only",children:"Tipo de documento"}),e.jsxs("select",{id:"docType",name:"docType",value:o.docType,onChange:u,className:"w-full rounded-md border-none bg-gray-100 px-4 py-3 text-gray-700 focus:ring-2 focus:ring-sky-500",children:[e.jsx("option",{value:"",disabled:!0,children:"Tipo de documento"}),e.jsx("option",{value:"",children:" (None)"}),e.jsx("option",{value:"V",children:"V (Cédula venezolana)"}),e.jsx("option",{value:"E",children:"E (Cédula extranjera)"}),e.jsx("option",{value:"J",children:"J (RIF jurídico)"}),e.jsx("option",{value:"G",children:"G (RIF gubernamental)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"docNumber",className:"sr-only",children:"Número"}),e.jsx("input",{id:"docNumber",name:"docNumber",type:"tel",required:!0,placeholder:"123456789",value:o.docNumber,onChange:u,className:"w-full rounded-md border-none bg-gray-100 px-4 py-3 text-gray-700 placeholder-gray-400 focus:ring-2 focus:ring-sky-500"})]}),e.jsx("button",{type:"submit",className:"w-full rounded-md bg-sky-600 py-3 font-semibold text-white transition hover:bg-sky-700 focus:outline-none focus:ring-4 focus:ring-sky-400/50",children:"Consultar"})]}),i&&e.jsxs("div",{className:"flex flex-col items-center justify-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-10 w-10 border-b-2 border-sky-600 mb-2"}),e.jsx("p",{className:"text-gray-600",children:"Consultando..."})]}),r&&!i&&e.jsx("div",{className:`mt-4 text-center text-sm ${r.includes("no está registrado")?"text-red-600 font-semibold":"text-gray-700"}`,children:r}),d.length>0&&e.jsxs("div",{className:"bg-gray-100 pt-4",children:[e.jsx("h3",{className:"font-semibold text-md mb-2",children:"Facturas encontradas:"}),e.jsx("ul",{className:"space-y-3",children:d.map(s=>e.jsxs("li",{className:"flex flex-col md:flex-row md:items-center md:justify-between bg-gray-100 rounded-md p-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.detalle}),e.jsxs("div",{className:"text-sm text-gray-600",children:["Monto: ",s.valor]})]}),e.jsx("button",{className:"mt-2 md:mt-0 md:ml-4 rounded bg-green-600 px-4 py-2 text-white font-semibold hover:bg-green-700 transition hover:cursor-pointer",onClick:()=>g(s),children:"Pagar"})]},s.IDFactura))})]}),c&&e.jsx("div",{className:"mt-4 text-center text-sm font-semibold text-blue-700",children:c})]})})}export{S as default};
